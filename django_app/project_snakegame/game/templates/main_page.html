<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Única</title>
    <style>
        #display {
            width: 600px;
            height: 400px;
            border: 5px solid black;
            position: absolute;
            top: 20px;
            left: 20px;
        }
        #score {
            position: absolute;
            top: 10px; /* Espaçamento do topo da tela */
            left: 10px; /* Espaçamento da esquerda da tela */
            font-size: 32px;
            font-family: Arial, sans-serif;
        }
        #snake {
            width: 10px;
            height: 10px;
            background-color: black;
            position: absolute;
            top: 50%; /* Metade da altura da tela */
            left: 50%; /* Metade da largura da tela */
            transform: translate(-50%, -50%); /* Centraliza o pixel */
        }
        #food {
            width: 10px;
            height: 10px;
            background-color: green;
            position: absolute;
        }
    </style>
</head>
<body>
    <div id="display">
        <div id="score">Score: 0</div>
        <div id="snake"></div>
        <div id="food"></div>
    </div>
    <script>
        let direction = 0; // 0: parado, 1: direita, 2: esquerda, 3: cima, 4: baixo
        let gameLoop;

        function posicaoAleatoria(max) {
            return Math.floor(Math.random() * max);
        }

        function posicionarComida() {
            const food = document.getElementById('food');
            const display = document.getElementById('display');

            const maxX = display.clientWidth - food.clientWidth;
            const maxY = display.clientHeight - food.clientHeight;

            const comidaX = posicaoAleatoria(maxX);
            const comidaY = posicaoAleatoria(maxY);

            food.style.left = comidaX + 'px';
            food.style.top = comidaY + 'px';
        }

        function moverCobraAutomaticamente() {
            const snake = document.getElementById('snake');
            const display = document.getElementById('display');
            const step = 10;
            let left = parseInt(snake.style.left);
            let top = parseInt(snake.style.top);

            switch(direction) {
                case 1: // Direita
                    left = Math.min(display.clientWidth - snake.clientWidth, left + step);
                    break;
                case 2: // Esquerda
                    left = Math.max(0, left - step);
                    break;
                case 3: // Cima
                    top = Math.max(0, top - step);
                    break;
                case 4: // Baixo
                    top = Math.min(display.clientHeight - snake.clientHeight, top + step);
                    break;
            }

            snake.style.left = left + 'px';
            snake.style.top = top + 'px';

            // Verificar colisão com a comida
            detectarColisao();
        }

        function detectarColisao() {
            const snake = document.getElementById('snake');
            const food = document.getElementById('food');

            const snakeRect = snake.getBoundingClientRect();
            const foodRect = food.getBoundingClientRect();

            if (
                snakeRect.left < foodRect.right &&
                snakeRect.right > foodRect.left &&
                snakeRect.top < foodRect.bottom &&
                snakeRect.bottom > foodRect.top
            ) {
                inicializarJogo(); // Reiniciar o jogo
            }
        }

        function inicializarJogo() {
            const snake = document.getElementById('snake');
            const display = document.getElementById('display');

            // Posicionar a cobra no centro
            const initialLeft = (display.clientWidth - snake.clientWidth) / 2;
            const initialTop = (display.clientHeight - snake.clientHeight) / 2;
            snake.style.left = initialLeft + 'px';
            snake.style.top = initialTop + 'px';

            // Posicionar a comida aleatoriamente
            posicionarComida();

            // Resetar direção
            direction = 0;

            // Limpar qualquer loop de jogo existente
            if (gameLoop) {
                clearInterval(gameLoop);
            }

            // Iniciar o loop de jogo
            gameLoop = setInterval(moverCobraAutomaticamente, 100);
        }

        function controlarMovimento(event) {
            switch(event.key) {
                case 'ArrowRight':
                    if (direction!=2){
                    direction = 1;
                    }
                    break;
                case 'ArrowLeft':
                    if (direction!=1){
                    direction = 2;
                    }
                    break;
                case 'ArrowUp':
                    if (direction!=4){
                    direction = 3;
                    }
                    break;
                case 'ArrowDown':
                    if (direction!=3){
                    direction = 4;
                    }
                    break;
                case 'q':
                    inicializarJogo();
                    break;
            }
        }

        // Inicializar o jogo ao carregar a página
        window.onload = function() {
            inicializarJogo();
            document.addEventListener('keydown', controlarMovimento);
        };
    </script>
</body>
</html>
    </script>
</body>
</html>